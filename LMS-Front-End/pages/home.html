<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" name="viewport">
    <title>LMS-Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet">
    <!----css3---->
    <link href="../assets/css/home.css" rel="stylesheet">
    <link href="../assets/img/bachelors-degree.png" rel="icon" type="image/png">

    <!--google fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">


    <!--google material icon-->
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">

    <style>
        #content2 {
            display: none;
        }
        #marq{
            color: white;
        }
        #accImage>img{
            border-radius: 50%;
            height: 200px;
        }
    </style>
</head>
<body>


<div class="wrapper">
    <div id="sidebar">
        <div class="sidebar-header">
            <h3><img class="img-fluid" src="../assets/img/graduation-hat.png"/><span>LMS</span></h3>
        </div>
        <ul class="list-unstyled component m-0">
            <li class="active" id="dashboard">
                <a class="dashboard" href="#"><i class="material-icons">dashboard</i>dashboard </a>
            </li>
            <li class="active" id="account">
                <a class="dashboard" href="#"><i class="material-icons">account_circle</i>Account </a>
            </li>
            <li class="active" id="logout">
                <a class="dashboard" href="../pages/login.html" target="_self" style="color: rgb(237, 95, 30)"><i class="material-icons" style="color: rgb(237, 95, 30)">logout</i>logout </a>
            </li>
        </ul>
    </div>
    <div id="content">
        <div class="top-navbar bg-warning bg-opacity-80">
            <div class="xd-topbar">
                <div class="row">
                    <div class="col-md-2 col-lg-12 order-3 order-md-2">
                        <marquee direction="left" id="marq">Welcome To Learning Managment System</marquee>
                    </div>
                </div>
            </div>
        </div>
        <div class="main-content">
            <div class="row">
                <div class="col-md-12">
                    <div class="table">
                        <div class="table-title">
                            <div class="row">
                                <div class="col-sm-6 p-0 flex justify-content-lg-start justify-content-center">
                                    <h2 class="ml-lg-2">All Course</h2>
                                </div>
                            </div>
                        </div>
                        <div class="coll-12">
                            <div class="row">
                                <div id="01" class="col-lg-3 shadow">
                                    <img class="card-img-top img-fluid" src="../assets/img/human-resource-management.jpeg" style="width: 400px"/>
                                    <div class="card-body">
                                        <h5 class="card-title">Diploma in HR Management</h5>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <button type="button" class="btn btn-outline-primary" onclick="location.href='../pages/courses/01.html'">Enroll Course</button>
                                    </div>
                                </div>
                                <div id="02" class="col-lg-3 shadow">
                                    <img class="card-img-top img-fluid" src="../assets/img/business-man-1.png" style="width: 400px"/>
                                    <div class="card-body">
                                        <h5 class="card-title">Diploma in Business Management</h5>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <button type="button" class="btn btn-outline-primary" onclick="location.href='../pages/courses/02.html'">Enroll Course</button>
                                    </div>
                                </div>
                                <div id="03" class="col-lg-3 shadow">
                                    <img class="card-img-top img-fluid" src="../assets/img/market-man.png" style="width: 400px"/>
                                    <div class="card-body">
                                        <h5 class="card-title">Diploma in Marketing Management</h5>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <button type="button" class="btn btn-outline-primary" onclick="location.href='../pages/courses/03.html'">Enroll Course</button>
                                    </div>
                                </div>
                                <div id="04" class="col-lg-3 shadow">
                                    <img class="card-img-top img-fluid" src="../assets/img/law-man.png" style="width: 400px"/>
                                    <div class="card-body">
                                        <h5 class="card-title">Diploma in Employment Law</h5>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <button type="button" class="btn btn-outline-primary" onclick="location.href='../pages/courses/04.html'">Enroll Course</button>
                                    </div>
                                </div>
                                <div id="05" class="col-lg-3 shadow">
                                    <img class="card-img-top img-fluid" src="../assets/img/human-resource-management-2.png" style="width: 400px"/>
                                    <div class="card-body">
                                        <h5 class="card-title">Bachelors of Business Management in HRM</h5>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <button type="button" class="btn btn-outline-primary" onclick="location.href='../pages/courses/05.html'">Enroll Course</button>
                                    </div>
                                </div>
                                <div id="06" class="col-lg-3 shadow">
                                    <img class="card-img-top img-fluid" src="../assets/img/bsc-business-man.png" style="width: 400px"/>
                                    <div class="card-body">
                                        <h5 class="card-title">Bachelors of Business Management</h5>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <p class="card-text"></p>
                                        <button type="button" class="btn btn-outline-primary" onclick="location.href='../pages/courses/06.html'">Enroll Course</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="content2">
        <div class="main-content">
            <div class="row">
                <div class="col-md-12">
                    <div class="table">
                        <div class="table-title">
                            <div class="row">
                                <div class="col-sm-6 p-0 flex justify-content-lg-start justify-content-center">
                                    <h2 class="ml-lg-2">Profile Info</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-lg-6" id="accImage">

                            </div>
                            <div class="col-lg-6">
                                <form>
                                    <div class="form-group">
                                        <label for="email">Email address</label>
                                        <input type="email" class="form-control" id="email">
                                        <span class="control-error" id="lblemail"></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="name">Full Name</label>
                                        <input type="name" class="form-control" id="name">
                                        <span class="control-error" id="lblname"></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="password">Password</label>
                                        <input type="password" class="form-control" id="password">
                                        <span class="control-error" id="lblpassword"></span>
                                    </div>
                                    <div class="form-group" style="margin-top: 10px">
                                        <button type="button" class="btn btn-warning" id="updateInfo">Update Info</button>
                                        <button type="button" class="btn btn-danger" id="deleteInfo">Delete Profile</button>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/jquery-3.6.1.min.js"></script>
<script src="../assets/js/util/validation.js"></script>
<script>
    let baseUrl = "http://localhost:8081/lms/api/v1/";

    loadAccDetail();

    $("#dashboard").click(function () {
        $("#content").css('display', 'block');
        $("#content2").css('display', 'none');
    });

    $("#account").click(function () {
        $("#content").css('display', 'none');
        $("#content2").css('display', 'block');
    });
    
    function loadAccDetail() {
        var a = localStorage.getItem("myValue");
        let parse = JSON.parse(a);
        for (var i = 0; i < parse.length; i++) {
            let email = parse[i].email;
            let password = parse[i].password;

            $.ajax({
                url: baseUrl+"student?email="+email+"&password="+password,
                dataType: "json",
                success: function (res){
                    let name = res.data.name;
                    let email = res.data.email;
                    let password = res.data.password;

                    $("#name").val(name);
                    $("#email").val(email);
                    $("#password").val(password);
                },
                error: function (error){
                    console.log(JSON.parse(error.responseText).method);
                }
            })
        }
    }

    $("#updateInfo").click(function (){
        let name = $("#name").val();
        let email = $("#email").val();
        let password = $("#password").val();

        let student = {
            name:name,
            email:email,
            password:password
        }

        $.ajax({
            url: baseUrl+"student",
            method: "put",
            contentType: "application/json",
            dataType: "json",
            data: JSON.stringify(student),
            success: function (res){
                loadAccDetail();
                alert(res.message);
            },
            error: function (error){
                alert(JSON.parse(error.responseText).message);
            }
        })
    });

    $("#deleteInfo").click(function (){
        let email = $("#email").val();
        $.ajax({
            url: baseUrl+"student?email="+email,
            method: "delete",
            dataType: "json",
            success: function (res){
                alert(res.message);
                location.href='../index.html'
            },
            error: function (error){
                alert(JSON.parse(error.responseText).message);
            }
        })
    });
</script>

</body>
</html>


