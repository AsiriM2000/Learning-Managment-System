<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" name="viewport">
    <title>Enroll Courses</title>
    <!-- Bootstrap CSS -->
    <link href="../../assets/css/bootstrap.min.css" rel="stylesheet">
    <!----css3---->
    <link href="../../assets/css/home.css" rel="stylesheet">
    <link href="../../assets/img/bachelors-degree.png" rel="icon" type="image/png">

    <!--google fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">


    <!--google material icon-->
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">

    <style>
        #marq {
            color: white;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <div id="content-fluid">
        <div class="top-navbar bg-warning bg-opacity-80">
            <div class="xd-topbar">
                <div class="row">
                    <div class="col-lg-5">
                        <button class="btn btn-success" type="button" onclick="location.href='../home.html'">Back</button>
                    </div>
                    <div class="col-md-2 col-lg-12 order-3 order-md-2">
                        <marquee direction="left" id="marq">Welcome To Learning Managment System</marquee>
                    </div>
                </div>
            </div>
        </div>
        <div class="main-content">
            <div class="row">
                <div class="col-md-12">
                    <div class="table">
                        <div class="table-title">
                            <div class="row">
                                <div class="col-sm-6 p-0 flex justify-content-lg-start justify-content-center">
                                    <h2 class="ml-lg-2">Enroll Courses Now</h2>
                                </div>
                            </div>
                        </div>

                        <div class="coll-12">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="name">Enroll Id</label>
                                        <input class="form-control" id="id" type="text" readonly>
                                    </div>

                                        <div class="form-group">
                                            <label for="name">Full Name</label>
                                            <input class="form-control" id="name" type="text">
                                            <span class="control-error" id="lblname"></span>
                                        </div>

                                        <div class="form-group">
                                            <label for="address">Address</label>
                                            <input class="form-control" id="address" type="text">
                                            <span class="control-error" id="lbladdress"></span>
                                        </div>

                                        <div class="form-group">
                                            <label for="contact">Contact Number</label>
                                            <input class="form-control" id="contact" type="text">
                                            <span class="control-error" id="lblcontact"></span>
                                        </div>

                                        <div class="form-group">
                                            <label for="email">Email Address</label>
                                            <input class="form-control" id="email" type="email">
                                            <span class="control-error" id="lblemail"></span>
                                        </div>

                                        <div class="form-group">
                                            <label for="birth">Date of Birth</label>
                                            <input class="form-control" id="birth" type="date">
                                            <span class="control-error" id="lblbirth"></span>
                                        </div>
                                </div>
                                <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="nic">NIC Number</label>
                                            <input class="form-control" id="nic" type="text">
                                            <span class="control-error" id="lblnic"></span>
                                        </div>

                                        <div class="form-group">
                                            <label for="gender">Gender</label>
                                            <select class="form-select" id="gender">
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="education">Educational Qualifications</label>
                                            <select class="form-select" id="education" required>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="course">Course</label>
                                            <select class="form-select" id="course">
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="medium">Medium</label>
                                            <select class="form-select" id="medium">
                                            </select>
                                        </div>
                                </div>
                                <div class="col-lg-5">
                                    <button class="btn btn-primary" type="button" id="submitForm">Submit Form</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../../assets/js/bootstrap.min.js"></script>
<script src="../../assets/js/jquery-3.6.1.min.js"></script>
<script src="../../assets/js/util/EnrolValidation.js"></script>
<script>
    let baseUrl = "http://localhost:8081/lms/api/v1/";

    generateEnrolId();
    loadAllGender();
    loadAllQualification();
    loadAllCourse();
    loadAllMedium();

    function generateEnrolId(){
        $.ajax({
            url: baseUrl+"enroll",
            dataType: "json",
            success: function (res){
                let id = res.data;
                $("#id").val(id);
            },
            error: function (error){
                console.log(JSON.parse(error.responseText).message);
            }
        })
    }

    function loadAllGender() {
        $("#gender").empty();
        $("#gender").prepend(`<option>--Select Gender--</option>`);
        $("#gender").append(
                `<option>Male</option>
                 <option>Female</option>
                `);
    }

    function loadAllQualification() {
        $("#education").empty();
        $("#education").prepend(`<option>--Select Qualification--</option>`);
        $("#education").append(
                `<option>O/L</option>
                 <option>A/L</option>
                 <option>O/L & A/L</option>
                `);
    }

    function loadAllCourse() {
        $("#course").empty();
        $("#course").prepend(`<option>--Select Course--</option>`);
        $("#course").append(
            `<option>Diploma In HR Management</option>
             <option>Diploma In Business Management</option>
             <option>Diploma In Marketing Management</option>
             <option>Diploma In Employment Law</option>
             <option>Bachelors Of Business Management In HRM</option>
             <option>Bachelors Of Business Management</option>
            `);
    }

    function loadAllMedium() {
      $("#medium").empty();
      $("#medium").prepend(`<option>--Select Medium--</option>`);
      $("#medium").append(
              `<option>Sinhala</option>
               <option>English</option>
               <option>Tamil</option>
              `);
    }

    $("#submitForm").click(function (){
        let name = $("#name").val();
        let id = $("#id").val();
        let address = $("#address").val();
        let contact = $("#contact").val();
        let email = $("#email").val();
        let birth = $("#birth").val();
        let nic = $("#nic").val();
        let gender = $("#gender").val();
        let education = $("#education").val();
        let course = $("#course").val();
        let medium = $("#medium").val();

        let enroll={
            id:id,
            name:name,
            address:address,
            contact:contact,
            email:email,
            birth:birth,
            nic:nic,
            gender:gender,
            qualification:education,
            course:course,
            medium:medium
        }

        $.ajax({
            url: baseUrl+"enroll",
            method: "post",
            contentType: "application/json",
            dataType: "json",
            data: JSON.stringify(enroll),
            success: function (res){
                alert(res.message);
                clear();
                generateEnrolId();
                location.href='../home.html';
            },
            error: function (error){
                alert(JSON.parse(error.responseText).message);
            }
        })
    });

    function clear(){
        $("#name").val("");
        $("#address").val("");
        $("#contact").val("");
        $("#email").val("");
        $("#birth").val("");
        $("#nic").val("");
        $("#gender").val("");
        $("#education").val("");
        $("#course").val("");
        $("#medium").val("");
    }
</script>
</body>
</html>


